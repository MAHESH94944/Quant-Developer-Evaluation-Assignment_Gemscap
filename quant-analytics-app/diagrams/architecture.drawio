<mxfile host="app.diagrams.net" modified="2025-12-15T00:00:00.000Z" agent="GitHub Copilot" version="22.1.0">
  <diagram id="architecture" name="Architecture">
    <mxGraphModel dx="1200" dy="720" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <mxCell id="binance" value="Binance WebSocket\n(@trade stream)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="200" height="70" as="geometry" />
        </mxCell>

        <mxCell id="html" value="HTML Collector\n(index.html)\n(Optional: writes NDJSON)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="40" y="180" width="200" height="90" as="geometry" />
        </mxCell>

        <mxCell id="ws_ingest" value="WS Ingestion\nPython: ingestion/binance_ws.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="300" y="80" width="260" height="70" as="geometry" />
        </mxCell>

        <mxCell id="ndjson_ingest" value="NDJSON Ingestion\nPython: ingestion/loader.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="300" y="190" width="260" height="70" as="geometry" />
        </mxCell>

        <mxCell id="sqlite" value="SQLite Storage\n(ticks, bars, states)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="620" y="130" width="220" height="90" as="geometry" />
        </mxCell>

        <mxCell id="resample" value="Resampler\nPython: analytics/resample.py\n(1s/1m/5m OHLCV+VWAP)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="300" y="300" width="260" height="90" as="geometry" />
        </mxCell>

        <mxCell id="api" value="FastAPI\n(api/routes.py)\n/bars /analytics/* /export" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="620" y="300" width="220" height="90" as="geometry" />
        </mxCell>

        <mxCell id="ui" value="Streamlit UI\n(frontend/dashboard.py)\nPlotly charts + alerts" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="900" y="300" width="220" height="90" as="geometry" />
        </mxCell>

        <mxCell id="alerts" value="Alerts\n(alerts/rules.py)\n(z-score thresholds)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="900" y="410" width="220" height="70" as="geometry" />
        </mxCell>

        <!-- Edges -->
        <mxCell id="e1" style="endArrow=block;html=1;" edge="1" parent="1" source="binance" target="ws_ingest">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="e2" style="endArrow=block;html=1;" edge="1" parent="1" source="html" target="ndjson_ingest">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="e3" style="endArrow=block;html=1;" edge="1" parent="1" source="ws_ingest" target="sqlite">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="e4" style="endArrow=block;html=1;" edge="1" parent="1" source="ndjson_ingest" target="sqlite">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="e5" style="endArrow=block;html=1;" edge="1" parent="1" source="sqlite" target="resample">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="e6" style="endArrow=block;html=1;" edge="1" parent="1" source="resample" target="sqlite">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="e7" style="endArrow=block;html=1;" edge="1" parent="1" source="sqlite" target="api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="e8" style="endArrow=block;html=1;" edge="1" parent="1" source="api" target="ui">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="e9" style="endArrow=block;html=1;" edge="1" parent="1" source="ui" target="alerts">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
