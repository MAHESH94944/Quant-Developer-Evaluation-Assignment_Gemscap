<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1160" height="520" viewBox="0 0 1160 520">
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #111827; stroke-width: 2; rx: 10; }
      .txt { font-family: Arial, sans-serif; font-size: 14px; fill: #111827; }
      .small { font-size: 12px; fill: #111827; }
      .arrow { stroke: #111827; stroke-width: 2; fill: none; marker-end: url(#mEnd); }
    </style>
    <marker id="mEnd" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#111827" />
    </marker>
  </defs>

  <rect x="30" y="60" width="220" height="80" class="box"/>
  <text x="40" y="90" class="txt">Binance WebSocket</text>
  <text x="40" y="112" class="small">@trade stream</text>

  <rect x="30" y="170" width="220" height="100" class="box"/>
  <text x="40" y="200" class="txt">HTML Collector</text>
  <text x="40" y="222" class="small">index.html (optional NDJSON)</text>

  <rect x="290" y="60" width="290" height="80" class="box"/>
  <text x="300" y="90" class="txt">WS Ingestion</text>
  <text x="300" y="112" class="small">ingestion/binance_ws.py</text>

  <rect x="290" y="190" width="290" height="80" class="box"/>
  <text x="300" y="220" class="txt">NDJSON Ingestion</text>
  <text x="300" y="242" class="small">ingestion/loader.py</text>

  <rect x="620" y="120" width="240" height="110" class="box"/>
  <text x="630" y="150" class="txt">SQLite Storage</text>
  <text x="630" y="172" class="small">ticks, bars, ingestion_state,</text>
  <text x="630" y="192" class="small">resample_state</text>

  <rect x="290" y="310" width="290" height="100" class="box"/>
  <text x="300" y="340" class="txt">Resampler</text>
  <text x="300" y="362" class="small">analytics/resample.py</text>
  <text x="300" y="382" class="small">1s/1m/5m OHLCV + VWAP</text>

  <rect x="620" y="310" width="240" height="100" class="box"/>
  <text x="630" y="340" class="txt">FastAPI</text>
  <text x="630" y="362" class="small">api/routes.py</text>
  <text x="630" y="382" class="small">/bars /analytics/* /export</text>

  <rect x="900" y="310" width="240" height="100" class="box"/>
  <text x="910" y="340" class="txt">Streamlit + Plotly UI</text>
  <text x="910" y="362" class="small">frontend/dashboard.py</text>

  <rect x="900" y="430" width="240" height="70" class="box"/>
  <text x="910" y="460" class="txt">Alerts</text>
  <text x="910" y="482" class="small">z-score threshold rules</text>

  <!-- arrows -->
  <path d="M 250 100 L 290 100" class="arrow"/>
  <path d="M 250 220 L 290 220" class="arrow"/>
  <path d="M 580 100 L 620 150" class="arrow"/>
  <path d="M 580 220 L 620 170" class="arrow"/>
  <path d="M 620 230 L 470 310" class="arrow"/>
  <path d="M 580 360 L 620 180" class="arrow"/>
  <path d="M 860 360 L 900 360" class="arrow"/>
  <path d="M 1020 410 L 1020 430" class="arrow"/>
</svg>
